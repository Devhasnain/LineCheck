(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{6090:function(e,t,s){Promise.resolve().then(s.bind(s,6613))},2761:function(e,t,s){"use strict";s.r(t),s.d(t,{ContextProvider:function(){return c},CounterContext:function(){return n}});var a=s(7437),l=s(2265);let r={offers:[],barsWithDistance:[],user:{}},i=(e,t)=>{switch(t.type){case"OFFERS":return{...e,offers:t.payload};case"barsWithDistance":return{...e,barsWithDistance:t.payload};case"USER":return{...e,user:t.payload};default:return e}},n=(0,l.createContext)({state:r,dispatch:()=>null}),c=e=>{let{children:t}=e,[s,c]=(0,l.useReducer)(i,r);return(0,a.jsx)(n.Provider,{value:{state:s,dispatch:c},children:t})}},6613:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),l=s(2265),r=s(6691),i=s.n(r),n=s(4633),c=s(2761),o=s(8864),d=s.n(o);let x=d()(()=>Promise.all([s.e(562),s.e(80)]).then(s.bind(s,2080)),{loadableGenerated:{webpack:()=>[2080]},ssr:!1});var h=e=>{let{Bards:t}=e,[s,r]=(0,l.useState)("queue"),i=t.reduce((e,t)=>{let s=new Date(t.created_at).toLocaleDateString();return e[s]||(e[s]=[]),e[s].push({waittime:t.waittime,volume:t.volume,queue:t.queue}),console.log(e,"accumulator"),e},{}),n=Object.keys(i).map(e=>({date:e,sum:i[e].reduce((e,t)=>e+parseInt(t[s]),0)})),c={xaxis:{categories:n.map(e=>e.date)}},o=[{name:s,data:n.map(e=>e.sum)}],[d,h]=(0,l.useState)({series:o,toolbar:{show:!1},options:c,colors:["#B6BCF8","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],plotOptions:{bar:{horizontal:!1,borderRadius:12,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",columnWidth:"70%",barHeight:"70%",distributed:!1,rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[{from:0,to:0,color:void 0}],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}}},dataLabels:{enabled:!1},legend:{show:!1},yaxis:{show:!0,labels:{show:!0,align:"right",minWidth:0,maxWidth:160,style:{colors:["#ffffff"],fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"},offsetX:0,offsetY:0,rotate:0,formatter:e=>e}}});return(0,a.jsxs)("div",{className:"p-4 rounded-3xl bg-[linear-gradient(183.65deg,#4100FA_3%,rgba(178,183,231,0.38)107%)]",children:[(0,a.jsxs)("div",{className:"w-full flex justify-between items-center my-4",children:[(0,a.jsx)("h1",{className:" text-white text-[20px] font-bold",children:"Overview"}),(0,a.jsx)(function(){let[e,t]=(0,l.useState)(!1),i=e=>{r(e),t(!1)};return(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsxs)("div",{className:"flex text-[12px] text-white items-center gap-1 bg-[#34383B] p-2 rounded-2xl cursor-pointer",onClick:()=>{t(!e)},children:[s,(0,a.jsx)("img",{src:"/icons (2).png",height:10,width:10,alt:""})]}),e&&(0,a.jsx)("ul",{className:"absolute mt-2 py-1 z-30 w-32 bg-[#34383B] text-[12px] text-white rounded-2xl shadow",children:["queue","waittime","volume"].map(e=>(0,a.jsx)("li",{className:"px-2 py-1 cursor-pointer ".concat(s===e?"bg-blue-500 rounded-2xl":""),onClick:()=>i(e),children:e},e))})]})},{})]}),(0,a.jsx)(x,{options:c,series:o,type:"bar"})]})},m=s(171),u=()=>{let[e,t]=(0,l.useState)({}),[s,r]=(0,l.useState)(!1),[o,d]=(0,l.useState)({}),[x,u]=(0,l.useState)([]),[p,f]=(0,l.useState)(0),[g,j]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user"));j(e),async function(){r(!0);try{fetch("".concat(n.j,"bar/").concat(e.email),a).then(e=>e.json()).then(e=>{t(e.data),fetch("".concat(n.j,"bartimmings/").concat(e.data.id),a).then(e=>e.json()).then(e=>{d(function(e){let t=e.length;if(0===t)return{averageQueue:0,averageVolume:0,averageWaitTime:"00:00"};let s=0,a=0,l=0;e.forEach(e=>{s+=parseInt(e.queue),a+=parseInt(e.volume);let[t,r]=e.waittime.split(":");l+=60*parseInt(t)+parseInt(r)});let r=s/t,i=a/t,n=l/t,c="".concat(String(Math.floor(n/60)).padStart(2,"0"),":").concat(String(Math.floor(n%60)).padStart(2,"0"));return{averageQueue:r,averageVolume:i,averageWaitTime:c}}(e.data)),u(e.data),console.log(e)}).catch(e=>console.log("error",e)),fetch("".concat(n.j,"offers/").concat(e.data.id),a).then(e=>e.json()).then(e=>{F({type:"OFFERS",payload:e.data}),r(!1)}).catch(e=>console.log("error",e))}).catch(e=>console.log("error",e));var s=new Headers;s.append("Content-Type","application/json");var a={method:"GET",headers:s,redirect:"follow"}}catch(e){console.log("error",e)}}()},[]);let[b,v]=(0,l.useState)(0),[w,N]=(0,l.useState)(0),y=e=>{switch(e){case"volumeMinus":0!=b&&v(b-5);break;case"volumePlus":100!=b&&v(b+5);break;case"waitTimeMinus":0!=w&&N(w-1);break;case"waitTimePlus":20!=w&&N(w+1)}},{state:S,dispatch:F}=(0,l.useContext)(c.CounterContext),[k,C]=(0,l.useState)(!1);function _(e){var t;let s=Math.floor(e/3600),a=e%3600,l=(null===(t=Math.floor(a/60))||void 0===t?void 0:t.toString().padStart(2,"0"))||"",r=(a%60).toFixed(0).padStart(2,"0");return s>0?"".concat(s,":").concat(l,":").concat(r):"".concat(l,":").concat(r)}return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex gap-4 w-full px-8",children:[(0,a.jsxs)("div",{className:"w-[60%]",children:[(0,a.jsx)("h1",{className:"text-white mb-2",children:"TOP Bar is open"}),(0,a.jsxs)("div",{className:"w-full flex items-center justify-between gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center flex-col justify-center p-2 rounded-2xl bg-[linear-gradient(159.93deg,#4100FA_13.38%,_rgba(108,112,118,0)150.07%)] w-[35%] h-[120px]",children:[(0,a.jsx)("p",{className:"text-[10px] text-white",children:"Total waiting time "}),(0,a.jsx)("h1",{className:"text-[14px] text-white",children:null==o?void 0:o.averageWaitTime})]}),(0,a.jsxs)("div",{className:"flex items-center flex-col justify-center p-2 rounded-2xl bg-[linear-gradient(169.45deg,_#D2C7F4_-3.64%,_rgba(108,112,118,0)167.57%)] w-[25%] h-[120px]",children:[(0,a.jsx)("p",{className:"text-[10px] text-white",children:"Volume of Guest"}),(0,a.jsx)("h1",{className:"text-[14px] text-white",children:null==o?void 0:o.averageQueue})]}),(0,a.jsxs)("div",{className:"flex items-center flex-col justify-center p-2 rounded-2xl bg-[linear-gradient(174.24deg,_#4100FA_4.04%,rgba(108,112,118,0)95.06%)] w-[35%] h-[120px]",children:[(0,a.jsx)("p",{className:"text-[10px] text-white",children:"opening - Closing"}),(0,a.jsx)("h1",{className:"text-[14px] text-white",children:"8am:8pm"})]})]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(h,{Bards:x}),(0,a.jsxs)("div",{className:"mt-8 flex  gap-8 p-4 rounded-xl bg-[linear-gradient(183.65deg,#23202D_3%,rgba(100,115,254,0.38)107%)]",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-[20px] font-bold text-white mb-2",children:"WAIT TIME"}),(0,a.jsxs)("div",{className:"bg-[#1C1C1E80] w-[150px] flex justify-center flex-col items-center rounded-3xl p-2",children:[(0,a.jsx)(i(),{src:"/StopwatchIconAnimation.png",width:100,height:100,alt:""}),(0,a.jsxs)("div",{className:"h-10 w-[90%] bg-[#a8a8ad99] rounded-lg  p-1 mx-auto my-0 flex items-center justify-between",children:[(0,a.jsx)(i(),{src:"/minus.png",className:"cursor-pointer",onClick:()=>y("waitTimeMinus"),width:30,height:30,alt:""}),(0,a.jsxs)("div",{className:" flex flex-col items-center",children:[(0,a.jsx)("h6",{className:"text-[#FFFFFF] text-[12px]",children:"Wait"}),(0,a.jsxs)("div",{className:"flex items-center ",children:[(0,a.jsx)("h6",{className:"text-white text-[14px]",children:w}),(0,a.jsx)("sub",{className:"text-[#FFFFFF] text-[12px]",children:"m"})]})]}),(0,a.jsx)(i(),{src:"/plus.png",className:"cursor-pointer",onClick:()=>y("waitTimePlus"),width:30,height:30,alt:""})]})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-[20px] font-bold text-white mb-2",children:"Volume"}),(0,a.jsxs)("div",{className:"bg-[#1C1C1E80] w-[150px] flex justify-center flex-col items-center rounded-3xl p-2",children:[(0,a.jsx)(i(),{src:"/StopwatchIconAnimation (1).png",width:100,height:100,alt:""}),(0,a.jsxs)("div",{className:"h-10 w-[90%] bg-[#a8a8ad99] rounded-lg  p-1 mx-auto my-0 flex items-center justify-between",children:[(0,a.jsx)(i(),{src:"/minus.png",className:"cursor-pointer",onClick:()=>y("volumeMinus"),width:30,height:30,alt:""}),(0,a.jsxs)("div",{className:" flex flex-col items-center",children:[(0,a.jsx)("h6",{className:"text-[#FFFFFF] text-[12px]",children:"Volume"}),(0,a.jsxs)("div",{className:"flex items-center ",children:[(0,a.jsx)("h6",{className:"text-white text-[14px]",children:b}),(0,a.jsx)("sub",{className:"text-[#FFFFFF] text-[12px]",children:"%"})]})]}),(0,a.jsx)(i(),{src:"/plus.png",className:"cursor-pointer",onClick:()=>y("volumePlus"),width:30,height:30,alt:""})]})]})]}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:k?(0,a.jsx)("button",{onClick:()=>{var t=new Headers;t.append("Content-Type","application/json");var s=JSON.stringify({user_id:g.id,bar_id:"".concat(e.id),waittime:"".concat(_(60*w)),volume:"".concat(b),queue:"100"});fetch("".concat(n.j,"bartimmings/update/").concat(g.id,"/").concat(g.id),{method:"PUT",headers:t,body:s,redirect:"follow"}).then(e=>e.json()).then(e=>{m.Am.success("update successfully"),console.log(e)}).catch(e=>console.log("error",e))},className:"py-2 px-4 rounded-2xl text-black bg-white",children:"Update"}):(0,a.jsx)("button",{onClick:()=>{var t=new Headers;t.append("Content-Type","application/json");var s={method:"POST",headers:t,body:JSON.stringify({user_id:g.id,bar_id:"".concat(e.id),waittime:"".concat(_(60*w)),volume:"".concat(b),queue:"100"}),redirect:"follow"};fetch("".concat(n.j,"bartimmings"),s).then(e=>e.json()).then(e=>{fetch("".concat(n.j,"bartimmings/id/").concat(g.id),s).then(e=>e.json()).then(e=>{m.Am.success("Successfully"),N(function(e){let[t,s]=e.split(":"),a=parseFloat(t),l=parseFloat(s)/60;return parseInt((a+l).toFixed(1))}(e.data[0].waittime)),v(parseInt(e.data[0].volume)),f(parseInt(e.data[0].queue)),console.log(e)}).catch(e=>console.log("error",e)),console.log(e)}).catch(e=>console.log("error",e))},className:"py-2 px-4 rounded-2xl text-black bg-white",children:"Submit"})})]})]})]}),(0,a.jsxs)("div",{className:"w-[40%] ",children:[(0,a.jsx)("h1",{className:"text-white mb-2",children:"Offers"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("div",{className:" flex flex-col gap-1 w-full",children:S.offers&&S.offers.map((e,t)=>(0,a.jsx)("div",{className:"relative h-[150px] w-[250px]  rounded-xl",children:(0,a.jsx)(i(),{src:e.image,className:"rounded-lg",fill:!0,alt:""})},t))})})]}),(0,a.jsx)(m.Ix,{})]})})},p=s(4033),f=()=>{let e=(0,p.useRouter)(),[t,s]=(0,l.useState)(!1),[r,c]=(0,l.useState)({image:"",name:"",email:""}),[o,d]=(0,l.useState)({});return(0,l.useLayoutEffect)(()=>{let e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user"));console.log(t,"getUser"),e||(0,p.redirect)("/login"),((null==t?void 0:t.role_type)=="3"||(null==t?void 0:t.role_type)=="1")&&(0,p.redirect)("/login"),c({image:t.image,name:t.firstname,email:t.email}),fetch("".concat(n.j,"bar/").concat(t.email),{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{d(e.data),console.log(e)}).catch(e=>console.log("error",e))},[]),(0,a.jsxs)("div",{className:"flex w-full ",children:[(0,a.jsxs)("div",{className:"bg-[#212429] w-[17%] h-[60rem]",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i(),{src:"/logo.png",width:120,height:120,alt:""})}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{className:"flex flex-col gap-2 mt-8",children:[(0,a.jsxs)("li",{onClick:()=>s(!1),className:"px-4 py-2 cursor-pointer text-white flex items-center gap-1",children:[(0,a.jsx)(i(),{src:"/home.png",width:25,height:25,alt:""}),"Home"]}),(0,a.jsxs)("li",{onClick:()=>s(!0),className:"px-4 py-2 cursor-pointer text-white flex items-center gap-1",children:[(0,a.jsx)(i(),{src:"/Vector (3).png",width:25,height:25,alt:""}),"Offers"]}),(0,a.jsxs)("li",{className:"px-4 py-2 cursor-pointer text-white flex items-center gap-1",children:[(0,a.jsx)(i(),{src:"/Vector (4).png",width:25,height:25,alt:""}),"Settings"]})]})})]}),(0,a.jsxs)("div",{className:"w-[83%] bg-black",children:[(0,a.jsxs)("div",{className:"flex w-full h-12 justify-end items-center gap-2 px-8",children:[(0,a.jsx)("h1",{className:"text-white cursor-pointer",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e.push("/login")},children:"Logout"}),(0,a.jsx)("h1",{className:"text-white",children:null==r?void 0:r.firstname})]}),t?(0,a.jsx)("div",{className:"w-[50%]",children:(0,a.jsx)(()=>{let[e,r]=(0,l.useState)({bar_id:1,name:"",image:null,description:"",is_active:!0,price:19.99}),i=e=>{let{name:t,value:s,type:a,checked:l,files:i}=e.target;"file"===a?r(e=>({...e,[t]:i[0]})):r(e=>({...e,[t]:"checkbox"===a?l:s}))};return(0,a.jsxs)("div",{className:"max-w-lg mx-auto ",children:[(0,a.jsx)("button",{onClick:()=>s(!t),className:"bg-[#E1E1E1] text-black rounded-lg px-4 py-2 hover:bg-[#E1E1E1]",children:"Back"}),(0,a.jsx)("h1",{className:"text-white text-center text-[3rem]",children:"Offers"}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),console.log(e);var s=new Headers,a=new FormData;a.append("bar_id",o.id),a.append("name",e.name),a.append("image",e.image),a.append("description",e.description),a.append("is_active",e.is_active?"1":"0"),a.append("price",e.price),fetch("".concat(n.j,"offers"),{method:"POST",headers:s,mode:"cors",body:a,redirect:"follow"}).then(e=>e.json()).then(e=>{m.Am.success(e.message),console.log(e)}).catch(e=>console.log("error",e))},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-white",children:"Offer Name"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:i,className:"w-full border border-gray-300 rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"image",className:"block text-white",children:"Upload Image"}),(0,a.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:i,className:"w-full border border-gray-300 rounded-lg p-2",required:!0}),e.image&&(0,a.jsx)("img",{src:URL.createObjectURL(e.image),alt:"Selected Image",className:"mt-2 max-h-40"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-white",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:e.description,onChange:i,rows:4,className:"w-full border border-gray-300 rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{className:"flex item-center gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-white",children:"Price"}),(0,a.jsx)("input",{type:"number",id:"price",name:"price",value:e.price,onChange:i,className:"w-full border border-gray-300 rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("label",{htmlFor:"is_active",className:"block text-white",children:"Active"}),(0,a.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:e.is_active,onChange:i,className:"mr-2"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"bg-[#E1E1E1] text-black rounded-lg px-4 py-2 hover:bg-[#E1E1E1]",children:"Submit"})})]})]})},{})}):(0,a.jsx)(u,{})]}),(0,a.jsx)(m.Ix,{})]})}},4633:function(e,t,s){"use strict";s.d(t,{j:function(){return a}});let a="http://127.0.0.1:8000/api/"}},function(e){e.O(0,[986,113,971,596,744],function(){return e(e.s=6090)}),_N_E=e.O()}]);